<div class="app-container">
  <!-- Overlay qui s'affiche quand la sidebar est ouverte sur mobile -->
  <div class="sidebar-overlay" [class.open]="sidebarOpen" (click)="toggleSidebar()" (keydown)="$event.key === 'Escape' && toggleSidebar()"></div>
  
  <div class="sidebar" [class.open]="sidebarOpen">
    <div class="sidebar-header">
      <div class="logo-container">
        <button class="logo-icon" (click)="toggleSidebar()" (keydown.enter)="toggleSidebar()" aria-label="Afficher/masquer les filtres">
          <img src="assets/icons/logo.png" alt="Logo" width="20" height="20">
        </button>
        <span class="logo-text">c'est ou</span>
        <button (click)="toggleDarkMode()" class="theme-toggle" [class.dark]="darkMode" aria-label="Changer de thème">
          <svg *ngIf="!darkMode" class="sun-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 17C14.7614 17 17 14.7614 17 12C17 9.23858 14.7614 7 12 7C9.23858 7 7 9.23858 7 12C7 14.7614 9.23858 17 12 17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 1V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M12 21V23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4.22 4.22L5.64 5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M18.36 18.36L19.78 19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M1 12H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M21 12H23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M4.22 19.78L5.64 18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <svg *ngIf="darkMode" class="moon-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
    <div class="sidebar-content">
      <app-form></app-form>
    </div>
  </div>
  
  <div class="map-container" [class.blur-background]="sidebarOpen">
    <div class="map-controls">
      
      <button class="control-button" [class.active]="mapType === 'street'" title="Vue plan" type="button" (click)="setMapType('street')">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 7L9 4L15 7L21 4V17L15 20L9 17L3 20V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 4V17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M15 7V20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="sr-only">Vue plan</span>
      </button>
      <button class="control-button" [class.active]="mapType === 'satellite'" title="Vue satellite" type="button" (click)="setMapType('satellite')">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
          <path d="M12 1L15.09 8.26L22 9L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9L8.91 8.26L12 1Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
          <path d="M12 2.69L14.39 8.79L21 9.54L16.5 13.96L17.61 20.55L12 17.81L6.39 20.55L7.5 13.96L3 9.54L9.61 8.79L12 2.69Z" stroke="currentColor" stroke-width="0.5" opacity="0.6"/>
        </svg>
        <span class="sr-only">Vue satellite</span>
      </button>
      <button class="control-button" [class.active]="mapType === 'cadastre'" title="Vue cadastre" type="button" (click)="setMapType('cadastre')">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M3 3H21V21H3V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M3 9H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M9 21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="sr-only">Vue cadastre</span>
      </button>
    </div>
  
    <!-- Composant map -->
    <app-map [leftSidebarOpen]="sidebarOpen"></app-map>
  
    <!-- Logo fixe qui reste visible quand la sidebar est cachée -->
    <button class="fixed-logo" type="button" (click)="toggleSidebar()" (keydown.enter)="toggleSidebar()" *ngIf="!sidebarOpen">
      <div class="logo-icon-container">
        <img src="assets/icons/logo.png" alt="Logo" width="20" height="20">
      </div>
      <span class="sr-only">Afficher le menu</span>
    </button>
  </div>
</div>
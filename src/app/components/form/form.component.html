<div class="filter-form-container">
  <form [formGroup]="filterForm" aria-label="Formulaire de filtres de recherche">
  
    <!-- Section Prix -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-title">
          <div class="icon-container">
            <img src="assets/icons/house-plus.png" alt="Prix" class="section-icon-img">
          </div>
          <h3>Ventes passées</h3>
        </div>
        <label class="toggle-switch" for="usePriceFilter">
          <input type="checkbox" formControlName="usePriceFilter" id="usePriceFilter">
          <span class="slider"></span>
        </label>
      </div>
  
      <div class="section-content" *ngIf="filterForm.get('usePriceFilter')?.value">
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" value="exact" formControlName="priceMode">
            <span class="radio-label">Montant exact</span>
          </label>
          <label class="radio-item">
            <input type="radio" value="interval" formControlName="priceMode">
            <span class="radio-label">Intervalle</span>
          </label>
        </div>
  
        <div class="price-exact" *ngIf="filterForm.get('priceMode')?.value === 'exact'">
          <div class="form-group">
            <label for="price">Montant (€)</label>
            <input type="number" id="price" formControlName="price" placeholder="ex: 150000">
          </div>
        </div>
  
        <div class="price-interval" *ngIf="filterForm.get('priceMode')?.value === 'interval'">
          <div class="input-row">
            <div class="form-group">
              <label for="minPrice">Min (€)</label>
              <input type="number" id="minPrice" formControlName="minPrice" placeholder="100000">
            </div>
            <div class="form-group">
              <label for="maxPrice">Max (€)</label>
              <input type="number" id="maxPrice" formControlName="maxPrice" placeholder="300000">
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Section Date -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-title">
          <div class="icon-container">
            <img src="assets/icons/clock-icon.png" alt="Période" class="section-icon-img">
          </div>
          <h3>Période</h3>
        </div>
        <label class="toggle-switch" for="useDateFilter">
          <input type="checkbox" formControlName="useDateFilter" id="useDateFilter">
          <span class="slider"></span>
        </label>
      </div>
  
      <div class="section-content" *ngIf="filterForm.get('useDateFilter')?.value">
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" value="exact" formControlName="dateMode">
            <span class="radio-label">Date exacte</span>
          </label>
          <label class="radio-item">
            <input type="radio" value="interval" formControlName="dateMode">
            <span class="radio-label">Intervalle</span>
          </label>
        </div>
  
        <div class="date-exact" *ngIf="filterForm.get('dateMode')?.value === 'exact'">
          <div class="form-group">
            <label for="exactDate">Date</label>
            <input type="date" id="exactDate" formControlName="exactDate">
          </div>
        </div>
  
        <div class="date-interval" *ngIf="filterForm.get('dateMode')?.value === 'interval'">
          <div class="input-row">
            <div class="form-group">
              <label for="startDate">Date de début</label>
              <input type="date" id="startDate" formControlName="startDate">
            </div>
            <div class="form-group">
              <label for="endDate">Date de fin</label>
              <input type="date" id="endDate" formControlName="endDate">
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Section Surface -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-title">
          <div class="icon-container">
            <img src="assets/icons/m2-icon.png" alt="Taille du terrain" class="section-icon-img">
          </div>
          <h3>Taille du terrain</h3>
        </div>
        <label class="toggle-switch" for="useSurfaceFilter">
          <input type="checkbox" formControlName="useSurfaceFilter" id="useSurfaceFilter">
          <span class="slider"></span>
        </label>
      </div>
  
      <div class="section-content" *ngIf="filterForm.get('useSurfaceFilter')?.value">
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" value="exact" formControlName="surfaceMode">
            <span class="radio-label">Surface exacte</span>
          </label>
          <label class="radio-item">
            <input type="radio" value="interval" formControlName="surfaceMode">
            <span class="radio-label">Intervalle</span>
          </label>
        </div>
  
        <div class="surface-exact" *ngIf="filterForm.get('surfaceMode')?.value === 'exact'">
          <div class="form-group">
            <label for="surface">Surface (m²)</label>
            <input type="number" id="surface" formControlName="surface" placeholder="ex: 150">
          </div>
        </div>
  
        <div class="surface-interval" *ngIf="filterForm.get('surfaceMode')?.value === 'interval'">
          <div class="input-row">
            <div class="form-group">
              <label for="minSurface">Min (m²)</label>
              <input type="number" id="minSurface" formControlName="minSurface" placeholder="100">
            </div>
            <div class="form-group">
              <label for="maxSurface">Max (m²)</label>
              <input type="number" id="maxSurface" formControlName="maxSurface" placeholder="1000">
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Section Classe Énergie -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-title">
          <div class="icon-container">
            <img src="assets/icons/energy-class-icon.png" alt="Classe énergétique" class="section-icon-img">
          </div>
          <h3>Classe énergétique</h3>
        </div>
        <label class="toggle-switch" for="useEnergyFilter">
          <input type="checkbox" formControlName="useEnergyFilter" id="useEnergyFilter">
          <span class="slider"></span>
        </label>
      </div>
  
      <div class="section-content" *ngIf="filterForm.get('useEnergyFilter')?.value">
        <div class="energy-ratings">
          <label class="energy-rating rating-a">
            <input type="checkbox" formControlName="energyClassA">
            <span class="rating-letter">A</span>
          </label>
          <label class="energy-rating rating-b">
            <input type="checkbox" formControlName="energyClassB">
            <span class="rating-letter">B</span>
          </label>
          <label class="energy-rating rating-c">
            <input type="checkbox" formControlName="energyClassC">
            <span class="rating-letter">C</span>
          </label>
          <label class="energy-rating rating-d">
            <input type="checkbox" formControlName="energyClassD">
            <span class="rating-letter">D</span>
          </label>
          <label class="energy-rating rating-e">
            <input type="checkbox" formControlName="energyClassE">
            <span class="rating-letter">E</span>
          </label>
          <label class="energy-rating rating-f">
            <input type="checkbox" formControlName="energyClassF">
            <span class="rating-letter">F</span>
          </label>
          <label class="energy-rating rating-g">
            <input type="checkbox" formControlName="energyClassG">
            <span class="rating-letter">G</span>
          </label>
        </div>
      </div>
    </div>

    <!-- Section Consommation -->
    <div class="form-section">
      <div class="section-header">
        <div class="section-title">
          <div class="icon-container">
            <img src="assets/icons/kwh-icon.png" alt="Consommation" class="section-icon-img">
          </div>
          <h3>Consommation</h3>
        </div>
        <label class="toggle-switch" for="useConsumptionFilter">
          <input type="checkbox" formControlName="useConsumptionFilter" id="useConsumptionFilter">
          <span class="slider"></span>
        </label>
      </div>
  
      <div class="section-content" *ngIf="filterForm.get('useConsumptionFilter')?.value">
        <div class="radio-group">
          <label class="radio-item">
            <input type="radio" value="exact" formControlName="consumptionMode">
            <span class="radio-label">Valeur exacte</span>
          </label>
          <label class="radio-item">
            <input type="radio" value="interval" formControlName="consumptionMode">
            <span class="radio-label">Intervalle</span>
          </label>
        </div>

        <div class="consumption-exact" *ngIf="filterForm.get('consumptionMode')?.value === 'exact'">
          <div class="form-group">
            <label for="exactConsumption">Consommation (kWh/m²/an)</label>
            <input type="number" id="exactConsumption" formControlName="exactConsumption" placeholder="ex: 150">
          </div>
        </div>

        <div class="consumption-interval" *ngIf="filterForm.get('consumptionMode')?.value === 'interval'">
          <div class="input-row">
            <div class="form-group">
              <label for="minConsumption">Min (kWh/m²/an)</label>
              <input type="number" id="minConsumption" formControlName="minConsumption" placeholder="50">
            </div>
            <div class="form-group">
              <label for="maxConsumption">Max (kWh/m²/an)</label>
              <input type="number" id="maxConsumption" formControlName="maxConsumption" placeholder="300">
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Actions -->
    <div class="form-actions">
      <button type="button"
              class="btn btn-primary"
              (click)="search()"
              [disabled]="!filterForm.get('usePriceFilter')?.value && !filterForm.get('useDateFilter')?.value && !filterForm.get('useSurfaceFilter')?.value && !filterForm.get('useEnergyFilter')?.value && !filterForm.get('useConsumptionFilter')?.value">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Rechercher</span>
      </button>
      <button type="button"
              class="btn btn-secondary"
              (click)="resetFilters()">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1 4V10H7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M23 20V14H17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10M23 14L18.36 18.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span>Réinitialiser</span>
      </button>
    </div>
  </form>
</div>